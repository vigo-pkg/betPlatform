# –°–∏—Å—Ç–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

–°–∏—Å—Ç–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ü–æ—Å–ª–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### Backend (BetService.java)
1. **–ú–µ—Ç–æ–¥ `getVotes(Long betId, String userEmail)`** - –¥–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–ú–µ—Ç–æ–¥ `vote(Long betId, VoteRequest request, String userEmail)`** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤
3. **–ü–æ–¥—Å—á–µ—Ç –≥–æ–ª–æ—Å–æ–≤** - –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –≥–æ–ª–æ—Å–æ–≤ "–∑–∞" –∏ "–ø—Ä–æ—Ç–∏–≤"
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ CONFLICT –ø—Ä–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã—Ö –≥–æ–ª–æ—Å–∞—Ö

### Backend (BetController.java)
1. **–ú–µ—Ç–æ–¥ `getVotes`** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–µ—Ä–≤–∏—Å
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `@AuthenticationPrincipal UserDetails`

## üìä –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è

### –¢–∏–ø—ã –≥–æ–ª–æ—Å–æ–≤
- **VoteResult.WIN** = –≥–æ–ª–æ—Å "–∑–∞" (true –≤ VoteRequest)
- **VoteResult.LOSE** = –≥–æ–ª–æ—Å "–ø—Ä–æ—Ç–∏–≤" (false –≤ VoteRequest)

### –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- ‚úÖ **–£—á–∞—Å—Ç–Ω–∏–∫–∏ (PARTICIPANT)** - –º–æ–≥—É—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å
- ‚úÖ **–ù–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ (OBSERVER)** - –º–æ–≥—É—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å
- ‚ùå **–°–æ–∑–¥–∞—Ç–µ–ª–∏** - –Ω–µ –º–æ–≥—É—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å –∑–∞ —Å–≤–æ–∏ –ø–∞—Ä–∏

### –°—Ç–∞—Ç—É—Å—ã –ø–∞—Ä–∏
- **OPEN** - –ø–∞—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ, –æ–∂–∏–¥–∞–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- **IN_PROGRESS** - –ø–∞—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ, –º–æ–∂–Ω–æ –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å
- **CONFLICT** - –≤–æ–∑–Ω–∏–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–∑-–∑–∞ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã—Ö –≥–æ–ª–æ—Å–æ–≤
- **RESOLVED** - –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω
- **FINISHED** - –ø–∞—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä–∏ –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä–∏
curl -X POST http://localhost:8080/api/bets \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"title":"–¢–µ—Å—Ç–æ–≤–æ–µ –ø–∞—Ä–∏","description":"–û–ø–∏—Å–∞–Ω–∏–µ","startDate":"2025-08-09T16:00:00","duration":24}'

# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞
curl -X POST http://localhost:8080/api/bets/1/join \
  -H "Authorization: Bearer USER2_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"role":"PARTICIPANT"}'

# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
curl -X POST http://localhost:8080/api/bets/1/join \
  -H "Authorization: Bearer USER3_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"role":"OBSERVER"}'
```

### 2. –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
```bash
# –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ "–∑–∞"
curl -X POST http://localhost:8080/api/bets/1/vote \
  -H "Authorization: Bearer USER_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"vote":true}'

# –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ "–ø—Ä–æ—Ç–∏–≤"
curl -X POST http://localhost:8080/api/bets/1/vote \
  -H "Authorization: Bearer USER_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"vote":false}'
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥–æ–ª–æ—Å–æ–≤
```bash
curl -X GET http://localhost:8080/api/bets/1/votes \
  -H "Authorization: Bearer USER_TOKEN"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "forVotes": 1,
  "againstVotes": 1,
  "userVote": true
}
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

### –ü—Ä–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤** - —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≥–æ–ª–æ—Å–æ–≤–∞—Ç—å
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–∞** - –≥–æ–ª–æ—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** - –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ –≥–æ–ª–æ—Å–∞, —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ CONFLICT

### –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
1. **–ü–æ–¥—Å—á–µ—Ç –≥–æ–ª–æ—Å–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á–µ—Ç –≥–æ–ª–æ—Å–æ–≤ "–∑–∞" –∏ "–ø—Ä–æ—Ç–∏–≤"
2. **–ì–æ–ª–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≥–æ–ª–æ—Å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (true/false/null)

## üé® Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (`bet-detail.html`)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥–æ–ª–æ—Å–æ–≤
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è "–ó–∞" –∏ "–ü—Ä–æ—Ç–∏–≤"
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ü–∏—è –≥–æ–ª–æ—Å–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### JavaScript (`bet-detail.js`)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥–æ–ª–æ—Å–æ–≤
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ–ª–æ—Å–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –ø–æ—Å–ª–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üìà –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å–ø–µ—à–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ
1. –°–æ–∑–¥–∞—Ç—å –ø–∞—Ä–∏
2. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
3. –£—á–∞—Å—Ç–Ω–∏–∫ –≥–æ–ª–æ—Å—É–µ—Ç "–∑–∞"
4. –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –≥–æ–ª–æ—Å—É–µ—Ç "–∑–∞"
5. –°—Ç–∞—Ç—É—Å –æ—Å—Ç–∞–µ—Ç—Å—è IN_PROGRESS

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –≥–æ–ª–æ—Å–æ–≤
1. –°–æ–∑–¥–∞—Ç—å –ø–∞—Ä–∏
2. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
3. –£—á–∞—Å—Ç–Ω–∏–∫ –≥–æ–ª–æ—Å—É–µ—Ç "–∑–∞"
4. –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –≥–æ–ª–æ—Å—É–µ—Ç "–ø—Ä–æ—Ç–∏–≤"
5. –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ CONFLICT

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
1. –°–æ–∑–¥–∞—Ç–µ–ª—å –∏–ª–∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç
2. –£–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—è (creator/participant/draw)
3. –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ RESOLVED

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- ‚ùå "–ì–æ–ª–æ—Å–æ–≤–∞—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–∞—Ä–∏"
- ‚ùå "–ì–æ–ª–æ—Å–æ–≤–∞—Ç—å –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏"
- ‚ùå "–ü–∞—Ä–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
- ‚ùå "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"

### –û—à–∏–±–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚ùå "–ü–∞—Ä–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
- ‚ùå "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω"

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–¢–∞–±–ª–∏—Ü–∞ `bet_votes`** - —Ö—Ä–∞–Ω–∏—Ç –≥–æ–ª–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ö–ª—é—á–∏** - bet_id + user_id
- **–ó–Ω–∞—á–µ–Ω–∏—è** - WIN/LOSE

### API Endpoints
- `GET /api/bets/{id}/votes` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥–æ–ª–æ—Å–æ–≤
- `POST /api/bets/{id}/vote` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ–ª–æ—Å–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

---

**–°–∏—Å—Ç–µ–º–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞! üéâ** 